프로젝트 관련 메모

(25.06.13)
[월요일까지 해야될것]
시트(IA) -> 기능별 URL method 설정

sql문 정렬

API 사용법 설명 정리 (전화번호 인증, 블로그)

각 테이블의 시퀀스 생성

각 페이지마다 필요한 sql문 생성


[오늘 할일]
- 관계도 체크

- 컬럼명 규칙 메모
자동증가값ID의 경우 _id
이름 _name
내용 _text
날짜 _date

[문제점] 
장바구니와 상품 테이블, 주문테이블 관계
(DB 설계시 구현할 페이지와 동시에 생각하면서 구현하다보니 헷갈림, erd에서 눈으로 보이는 순서대로 저장을 한다고 생각하면서 설계를 하다보니 꼬임)

장바구니테이블은 임시 저장소 역할 -> 주문 상품 테이블

주문상품 테이블에 어떤 데이터가 들어가야되는지?

api 사용을 어떻게 해야될지?

전화번호 인증 api를 사용하려면 결제를 해야 api를 사용가능한데 테스트용도로 무료로 사용하는 방법 -> https://www.oauth.network/ 

상품 상세내용 작성 시 네이버 블로거api를 통해 입력받는 기능 구현하려 했으나 네이버 블로거 api기능 종료, 대안으로 gogle blog api 사용 도전

구글 블로그 api는 블로그 글 조회,작성,수정,삭제가 가능하지만 검색해본결과 작성한 글을(상품등록 페이지로) 가져오는 기능은 없다고 함, 일반 판매자에게는 인증절차도 복잡하다고 함. 다른 대안 찾아봐야됨



[트리거 리스트]
- ORDERS(주문테이블)에서 주문 완료 후 7일 뒤 order_status(처리 상태) 값을 CONFIRM(주문확정)으로 변경
- 주문시 재고 변경 
- 취소/환불 시 재고 변경 ( 트랜잭션 처리 ) 
- 미배송 내역이 남아있는데 스토어 폐업 X
- 스토어 폐업시 스토어 관련 정보 삭제 (회원정보 삭제는 아님), 스토어ID와 연결된 데이터 전부 삭제(채팅방, 상품->)

[주문번호 형식]
날짜(250613) + 스토어ID + 상품명ID +  자동증가값

[스토어,판매자,상품,주문,게시글] 테이블 컬럼명 작성 

[카드 테이블]
카드번호(앞 4자리 맨뒤 4자리만 저장)
카드사
토큰 
별칭

[카드정보 등록 페이지 구현시 고려 사항]
모든 데이터 전송 HTTPS 적용
카드번호, cvc번호 저장 금지, PG사 토큰만 저장
사용자 결제용 비밀번호 암호화(해시 암호화)
본인인증 절차
PG사 토큰 유효기간 제공 받는다면, 만료 시 재등록 안내 처리

'인증'과 '인가'의 차이
인증 : 인증이란 사용자의 신원을 검증하는 프로세스로 외부 API에 요청하기전 인증키를 발급 받기 위한 절차를 의미
인가 : 인가란 사용자의 권한을 검증하는 프로세스로 사용자가 특정 request를 실행할 권한이 있는지를 확인하는 절차를 의미